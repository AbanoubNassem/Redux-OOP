import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";import StorageActionTypes from"./action-types";import{ActionProvider}from"../../action-providers";import reducer from"./reducer";var PREFIX="REDUX_OOP_";export var SyncStorageActions=function(_ActionProvider){_inherits(SyncStorageActions,_ActionProvider);function SyncStorageActions(){var _getPrototypeOf2;var _this;_classCallCheck(this,SyncStorageActions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SyncStorageActions)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.load=function(){var storage={};for(var i=0,len=localStorage.length;i<len;i++){var key=localStorage.key(i);if(key.startsWith(PREFIX)){var value=localStorage[key];storage[key]=JSON.parse(value);}}_this.dispatchAction(StorageActionTypes.STORAGE_LOADED,storage);return storage;};_this.clear=function(){var storage={};localStorage.clear();_this.dispatchAction(StorageActionTypes.STORAGE_CLEARED,storage);return storage;};_this.saveOrUpdate=function(object){for(var index=0;index<Object.keys(object).length;index++){var key=Object.keys(object)[index];localStorage.setItem(PREFIX+key,JSON.stringify(object[key]));}return _this.dispatchAction(StorageActionTypes.STORAGE_UPDATED,object);};_this.remove=function(){var keys=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var deleted={};if(Array.isArray(keys)){keys.forEach(function(key){localStorage.removeItem(PREFIX+key);deleted[key]=null;});}else{localStorage.removeItem(PREFIX+keys);deleted[keys]=null;}return _this.dispatchAction(StorageActionTypes.STORAGE_REMOVED,deleted);};_this.reducer=function(){return reducer;};return _this;}return SyncStorageActions;}(ActionProvider);
//# sourceMappingURL=sync-storage-actions.js.map